import { CountUp } from '/js/countUp.min.js';

console.log('This site was generated by Hugo.');

document.addEventListener('scroll', () => {
    const navbar = document.getElementById('navbar');
    const scrollY = window.scrollY > 70;
    navbar.classList.toggle('bg-white/95', scrollY);
    navbar.classList.toggle('shadow-lg', scrollY);
    navbar.classList.toggle('bg-transparent', !scrollY);
});

document.addEventListener('DOMContentLoaded', () => {
    // Count Up 
    const observer_countup = new IntersectionObserver(
        (entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    // Aksi ketika elemen terlihat
                    const options = {
                        â€ƒâ€ƒduration: 2 + (parseInt(entry.target.dataset.index) * .55),
                    };

                    const start_val = entry.target.dataset.count;
                    const countup = new CountUp(entry.target, start_val, options);

                    if (!countup.error) {
                        countup.start();
                    } else {
                        console.error(countup.error);
                    }

                    observer_countup.unobserve(entry.target)
                }
            });
        },
        { threshold: 1 }
    );

    document.querySelectorAll('.count-it').forEach((e, i) => {
        e.dataset.index = i 
        observer_countup.observe(e);
    });
});
